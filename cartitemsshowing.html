<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="shortcut icon" href="./images/logo.svg" type="image/x-icon">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
</head>
<body>
    <nav class="shadow" style="width: 100%;">
        <nav class="nav1">
            <div class="log"><img src="./images/logo.jpeg" style="cursor: pointer;"></div>
            <div class="sear"><span class="material-symbols-outlined">
                search
                </span><input type="search" placeholder="search for products" class="search"><button class="st">search</button></div>
            <div class="more">
                <button class="location"></button>
                    <button class="cart"><span class="material-symbols-outlined">
                        shopping_bag
                        </span>
                    <div class="qu">0</div>
                    </button>
                    <div class="cart-box">
                        <h3>Cart</h3>
                           <ul class="producList"></ul>
                           <div class="cartbuynowbutton">
                            <button class="buynowbutt" onclick="cartitems()">Buy now</button>
                            <div class=" checkout">
                                <div class="total">
                                    <small>subtotal (0 items) </small>0
                                </div>
                                <div class="clos">close</div>
                               </div>
                           </div>
                         
                            </div>
    
                <button class="profile" >
                    <i class="fa-solid fa-user"></i>
                    <div class="profboxnone">
                        <div class="prof-box">
                            <div>
                                <span class="material-symbols-outlined">
                            account_circle
                            </span>Username</div>
                            
                        <div><span class="material-symbols-outlined">
                            bookmark
                            </span> Whishlist</div>
                        <div onclick="logout()"><span class="material-symbols-outlined">
                            logout
                            </span> Logout</div></div>
                    </div>
                    
                </button>
               
            </div>
        </nav>
    
    <nav class="nav2">
      
    
    <button class="category" onclick="catclick()">
        Shop By category 
        <span class="material-symbols-outlined arr">
        arrow_drop_down
        </span>
    
        <!-- i have created boxdiv classname of category list for display none inside this catcl is the main div-->
    <div class="category-list">
    
    
    <div class="catcl">
        <div class="libox1 lifbox">
    
            <span>Fruits & vegitables</span>
            <span>Foodgrains,Oil & Masala</span>
            <span>Bakery,Cakes & Dairy</span>
            <span> Beverages</span>
            <span>Snacks & Branded Foods</span>
            <span>Beauty & Hygiene</span>
            <span>Cleaning & household</span>
            <span>Kitchen, Garden & Pets</span>
            <span>Lunch Boxes & Bags</span>
            <span>Eggs,Meat& Fish</span>
            
            <span>Gourmet & World Food</span>
            <span>Baby Care</span>
            <span>
            Pean Corner
            </span>
            
            
            </div>
            <div class="libox1 lifbox1">
            <span>Cuts & Sprouts</span>
            <span>Exotic Fruits &veggies</span>
            <span>Flower Bouquets, Bunches</span>
            <span>Fresh Fruits</span>
            <span>Fresh Vegitables</span>
            <span>Herbs & Seasonings</span>
            <span>Organic Fuits & Vegitables</span>
            
            
            </div>
            <div class="libox1 lifbox2">
                <span>Organic Fruits</span>
                <span>Organic Vegitables</span>
            </div>
            </div>
    </div>
    </button>
     <!-- i have created a div of class name nav2-but for buttons i this div there are four buttons and one div class name called dou -->
        
    <div class="nav2-but">
        <button class="under pushi" value="exotic fruits" >Exotic Fruits & V...</button>
        <button class="under tea" onclick="search('tea')" >Tea</button>
        <button class="under" onclick="search('ghee')">Ghee</button>
        <button class="under" onclick="search('nandini')">Nandini</button>
    
    
        <!-- i dou class name div have again two buttons -->
    
        <div class="dou" >
            <button class="under" onclick="search('vegitables')">Fresh Vegitables </button>
            <button>>></button>
        </div>
    </div>
    
    <div class="ext">
        <img src="./images/smar.webp" alt="">
        <img src="./images/smar1.png" alt="">
    </div>
    </nav>
      </nav>
      <section class="cartitemsshowsec ">
<div class="subtotalcart">
    <h3>Your Basket</h3>
    <div class="subtotalitembox">
        <div class="subtotalitemboxprice"></div>
        <button class="checkoutbut" onclick="checkoutbut()">Checkout</button>
    </div>
</div>
<div class="youritems">
    <h3>Your Items</h3>
    <div class="youritemsbox">
        
    </div>
</div>
      </section>
      <footer style="margin-top: 90px;">
        <div class="fb1">
    
            <div class="fb1box">
               <h4> Bigbasket</h4>
    <span>About Us                 </span>
    <span>Become A bigbasket Rider</span>
    <span>In News</span>
    <span>Green bigbasket</span>
    <span>Privacy Policy</span>
    <span>Affiliate</span>
    <span>Terms and Conditions</span>
    <span>Careers At bigbasket</span>
    <span>bb Instant</span>
    <span>bb Daily</span>
    <span>bb Blog</span>
    <span>bbnow</span>
            </div>
            <div class="fb1box">
    
               <h4> Help</h4>
              <span>  FAQs           </span>
              <span>  Contact Us</span>
              <span>  bb Wallet FAQs</span>
              <span>  bb Wallet T&Cs</span>
              <span>  Vendor Connect</span>
    
            </div>
            <div class="fb1box fotlogimg">
                <div><img src="./images/tata.png" alt="" width="240" style="margin-top: 30px;"></div>
                <div class="playapple"><img src="./images/playlog.png" alt="">
                <img src="./images/appstoelo1.png" alt=""></div>
                <div class="foticons"><i class="fa-brands fa-facebook-f"></i><i class="fa-brands fa-instagram"></i><i class="fa-brands fa-twitter"></i><i class="fa-brands fa-pinterest-p"></i></div>
                </div>
        </div>
        <p style="color: white;">....................................................................................................................................................................................................................................................................</p>
        <div class="fb2">
            <center><p>Cities We Serve</p></center>
            <div class="addo">
                Srirangapatna
    |
    Jashpur
    |
    North Paravur
    |
    Pratapgarh District
    |
    Guntakal
    |
    Muzaffarnagar District
    |
    Meerut District
    |
    Ludhiana District
    |
    Hooghly District
    |
    Gonda District
    |
    Fatehgarh Sahib District
    |
    Baghpat District
    |
    Amroha District
    |
    Mahabubnagar
    |
    Korba
    |
    Varanasi
    |
    Kanakapura
    |
    Khurai
    |
    Raisen
    |
    Gondia
    |
    Rahatgarh
    |
    Bhiwadi
    |
    Goa
    |
    Bahadurgarh
    |
    Raichur
    |
    Sindudurg
    |
    Sangareddy
    |
    Kurnool
    |
    Jadcherla
    |
    Muzaffarpur
    |
    JAGANNATHPRASAD
    |
    Hubli
    |
    Prakasam
    |
    Nalgonda
    |
    Karnal
    |
    Panipat
    |
    Rohtak
    |
    Renigunta
    |
    Patiala
    |
    Trichy
    |Prakasam District
    |
    Haridwar
    |
    Vinukonda
    |
    Kotagiri
    |
    Muthukulathur
    |
    Pathapatnam
    |
    Haripal
    |
    Kodumudi
    |
    Sivakasi
    |
    Pudukkottai
    |
    Narsipatnam
    |
    Narasannapeta
    |
    Kurupam
    |
    Pushpavanam
    |
    Chodavaram
    |
    Gudalur
    |
    Pennadam
    |
    Addateegala
    |
    Chirala
    |
    Yerragonda Palem
    |
    Kukanoor
    |
    Kushalnagar
    |
    Holenarasipur
    |
    Madakasira
    |
    Kavali
    |
    Eedu
    |
    Bagalkot
    |
    Mahalingpur
    |
    Humnabad
    |
    Yaragatti
    |
    Palani
    |
    Chilakaluripet
    |
    Chikkamagalur
    |
    Narayanpet
    |
    Jannaram
    |
    Rayaparthi
    |
    Panchkula
    |
    Metpally
    |
    Kodad
    |
    Mahadevpur
    |
    Rudrangi
    |
    Lunglei
    |
    Narmetta
    |
    Yellareddy
    |
    Bhangar
    |
    Pattukkottai
    |
    Aluva
    |
    Kayamkulam
    |
    Ezhupunna
    |
    Pangodu
    |
    Attingal
    |
    Edappal
    |
    Cherpulassery
    |
    chungatra
    |
    Koothattukulam
    |
    Manjeshwar
    |
    Choutuppal
    |
    Ladakh
    |
    Mananthavadi
    |
    Thodupuzha
    |
    Kattappana
    |
    Vadakara
    |
    Kuthuparamba
    |
    Sonipat
    |
    Thamarassery
    |
    Mundakayam
    |
    East Kameng
    |
    Mogullapally
    |
    East Garo Hills
    |
    Memari
    |
    Bolpur
    |
    Bangaon
    |
    Habra
    |
    Tamluk
    |
    Basirhat
    |
    Barakar
    |
    Chittaranjan
    |
    Gohana
    |
    Amritsar
    |
    West Kameng
    |
    West Khasi Hills
    |
    West Sikkim
    |
    Martur
    |
    West Tripura
    |
    Allagadda
    |
    Kittur
    |
    Motebeennura
    |
    Haveri
    |
    Kalghatgi
    |
    Sathupally
    |
    Harihara
    |
    Gadag
    |
    Haliyal
    |
    KHALARI-JR
    |
    Katol
    |
    Kendujhar
    |
    KENDRAPARA
    |
    Kawardha
    |
    Karimganj
    |
    Karbi Anglong
    |
    Kanker
    |
    Khergam
    |
    Masrakh
    |
    Bakhtiarpur
    |
    Hassan
    |
    Arambag
    |
    Baripada
    |
    Soro
    |
    Shadnagar
    |
    Bhongir
    |
    Kazipet
    |
    Athani
    |
    Vyara
    |
    CHHENDIPADA
    |
    CHHAPRA
    |
    Chatra
    |
    Changlang
    |
    Howrah
    |
    Hooghly
    |
    HINJILICUT
    |
    CHIKITI
    |
    Hosanagar
    |
    Malavalli
    |
    IMAMGANJ
    |
    ILIPUR
    |
    Koratagere
    |
    Magadi
    |
    Madikeri
    |
    Dabaspete
    |
    South Tripura
    |
    SULTANGANJ
    |
    South Garo Hills
    |
    South Sikkim
    |
    SURAJGARHA
    |
    Surguja
    |
    Sundergarh
    |
    Supaul
    |
    SWARUPNAGAR
    |
    Thoubal
    |
    Shorapur
    |
    Afzalpur
    |
    Chincholi
    |
    Dimapur
    |
    Jamkhandi
    |
    Sullia
    |
    Assaigoli
    |
    Virajpet
    |
    Pandua
    |
    Koppal
    |
    Jamuria
    |
    Khairabad
    |
    Byndoor
    |
    Vaidpura
    |
    Amalapuram
    |
    Addanki
    |
    Yavatmal
    |
    Wardha
    |
    Naharlagun
    |
    Ranebennur
    |
    Shiggaon
    |
    Savadatti
    |
    Sullurupeta
    |
    Makrana
    |
    Kuchaman City
    |
    Warora
    |
    RUNNISAIDPUR
    |
    RUNNISAIDPUR
    |
    Udham-Singh-Nagar
    |
    Nellore
    |
    Ambala
    |
    Agra
    |
    Ramgarh
    |
    Sircilla District
    |
    South 24 Parganas District
    |
    Sultanpur District
    |
    Madanpur
    |
    Faridabad
    |
    Raipur
    |
    Saiha
    |
    Saharsa
    |
    Malur
    |
    Hardoi
    |
    Darbhanga
    |
    Gaya
    |
    Motihari
    |
    Angul
    |
    Chhindwara
    |
    Ganjam
    |
    Bassi
    |
    Hindaun
    |
    Lalsot
    |
    Karauli
    |
    Dausa
    |
    Saoner
    |
    Gangapur City
    |
    Chandrapur
    |
    KAMAKHYANAGAR
    |
    KALYANI
    |
    Kandhamal
    |
    Kamrup
    |
    Amaravathi
    |
    Gwalior
    |
    Rajkot
    |
    Allahabad
    |
    Bareilly
    |
    Jodhpur
    |
    Palakkad
    |
    Palwal
    |
    Kalinga Nagar
    |
    Chinhat
    |
    Ottapidaram
    |
    Sriperumbudur
    |
    Thuckalay
    |
    Mayiladuthurai
    |
    Vilathikulam
    |
    llikkad|Neyyattinkara|Haripad|Shahabad Markanda|Bhagpat|Srinaga|
            </div>
         </div>
        </div>
        <p style="color: white;">....................................................................................................................................................................................................................................................................</p>
        <div class="fb3">
            <div class="fb3-b">
                <h5>Popular Categories</h5>
               <span> Sunflower Oils   </span>
               <span> Milk</span>
               <span> Organic F&V</span>
               <span> Floor Cleaners</span>
               <span> Frozen Veg Food</span>
            </div>
            <div class="fb3-b">
    
    <span>
    Wheat Atta</span>
    <span>
        Health Drinks
        </span>
    <span>
        Namkeen</span>
    <span>Other Juices</span>
    <span>
        Diapers & Wipes</span>
                
            </div>
            <div class="fb3-b">
    
    
                <span>Ghee</span>
                <span>Flakes</span>
                <span>Eggs</span>
                <span>Leaf vegetables</span>
            </div>
            <div class="fb3-b">
                <h5>Popular Brands</h5>
                <span>Amul</span>
                <span>RED BULL</span>
                <span>Yummiez</span>
                <span>Beitannia</span>
                <span>Haldiram's</span>
            </div>
            <div class="fb3-b">
    <span>Nescafe</span>
    <span>Elite Cake</span>
    <span>Yera</span>
    <span>wow! momo</span>
    <span>Ferrero</span>
            </div>
            <div class="fb3-b">
                <span>MTR</span>
                <span>Pediasure</span>
                <span>Yakult</span>
                <span>Fortune</span>
                <span>Lays</span>
            </div>
        </div>
        <div class="copy">
           <p>Powered  by @<b>Reshma Shaik</b></p>
        </div>
    </footer>
      <script>

            
        var locationdata = JSON.parse(localStorage.getItem("latlong"));
        let locationbut = document.querySelector(".location");
        
        locationbut.innerHTML = `
            <span class="locationcode">${locationdata.results[0].address_components[8].long_name}</span>
            <span class="locationplace">${locationdata.results[0].address_components[4].long_name}, ${locationdata.results[0].address_components[6].long_name}</span>
        `;
    // Selecting necessary DOM elements
// Selecting necessary DOM elements

let url = "http://localhost:3000/";
let sear = document.querySelector(".search");

// Function to perform search
const search = async (val) => {
    try {
        const response = await fetch(url + `${val}`);
        const result3 = await response.json();
        console.log(result3);
        
        // Store data in localStorage
        let str = JSON.stringify(result3);
        window.localStorage.setItem("mydata", str);
        
        // Redirect to itemspage.html
        window.location.assign("./itemspage.html");
        console.log("searched");
    } catch (error) {
        console.error('Error during search:', error);
    }
};

// Click event listener for the search button
let st = document.querySelector(".st");
st.addEventListener("click", () => {
    search(sear.value);
});

// Keypress event listener for the input field to trigger search on Enter key press
sear.addEventListener("keypress", (e) => {
    if (e.key === "Enter") {
        search(sear.value);
    }
});
let catelist=document.querySelector(".category-list")
let arr=document.querySelector(".arr")

var opn=1
const catclick=()=>{
   if(opn==1){
   catelist.style.display="block"
   arr.style.transform="rotate(180deg)"
   opn=0
   }else{
       catelist.style.display="none"
       arr.style.transform="rotate(0deg)"
       opn=1
   }
}

//upto here category function


let   profboxnone=document.querySelector(".profboxnone")
let  profile=document.querySelector(".profile")
   let click=1 
   profile.addEventListener("click",()=>{
       if(click==1){
            profboxnone.style.display="block"
           console.log("opened");
   click=0
       }else{
            profboxnone.style.display="none"
           console.log("closed");
           click=1
       }
   })


let cart = document.querySelector(".cart");
let closee = document.querySelector(".clos");
let quantity = document.querySelector(".qu");
let total = document.querySelector(".total");
let youritemsbox=document.querySelector(".youritemsbox")
let producLists = document.querySelector(".producList");
let subtotalitemboxprice = document.querySelector(".subtotalitemboxprice");

// Initialize checkOutList with localStorage data or empty array
let checkOutList = JSON.parse(localStorage.getItem('cart')) || [];

// Function to save cart to localStorage
function saveCartToStorage() {
    localStorage.setItem('cart', JSON.stringify(checkOutList));
}

// Function to reload and render cart items
function renderCartItems() {
    youritemsbox.innerHTML = "";
    

    Object.values(checkOutList).forEach((item, key) => {
      

        let itemElement = document.createElement("div");
                itemElement.classList.add("youritemsboxeach");
                itemElement.innerHTML = `
                  
                        <img class="youritemsboxeachimg" src="${item.image}" alt="${item.title}">
                        
                            <h4  class="youritemsboxeachtitle">${item.title}</h4>
                            <p class="youritemsboxeachprice">₹${item.price} x ${item.quantity}</p>
                           <div class="youritemsboxeachbutton">  <button class="quantity-btn" onclick="changeQuantity(${key}, -1)">-</button>
                                <span class="quantity-display">${item.quantity}</span>
                                <button class="quantity-btn" onclick="changeQuantity(${key}, 1)">+</button></div>
                            
                        </div>
                    </div>
                    <button class="remove-item" onclick="removeItem(${key})">Remove</button>
                `;
                youritemsbox.appendChild(itemElement);
     
        

    });
updateSubtotal()
   
}
console.log(youritemsbox)
function updateSubtotal() {
    let subtotal = 0;
    let itemCount = 0;

    Object.values(checkOutList).forEach(item => {
        subtotal += parseInt(item.price) * item.quantity;
        itemCount += item.quantity;
    });

    // Display subtotal price
    let subtotalElement = document.querySelector(".subtotalitemboxprice");
    subtotalElement.textContent = `Subtotal (${itemCount} items): ₹${subtotal}`;
localStorage.setItem("totalprice",JSON.stringify(subtotal))
quantity.innerText=itemCount
    // Save updated cart to localStorage
    saveCartToStorage();
}
// Function to change quantity of an item
function changeQuantity(id, amount) {
    if (checkOutList[id]) {
        checkOutList[id].quantity += amount;
        if (checkOutList[id].quantity < 1) {
            delete checkOutList[id];
        }
 
    renderCartItems();
    }
}
function removeItem(key) {
    delete checkOutList[key];
    renderCartItems();
}

// Initial rendering of cart items on page load
document.addEventListener('DOMContentLoaded', function() {
    renderCartItems();
});

// Event listener to open cart
cart.addEventListener("click", () => {
    bo.classList.add("active");
});

// Event listener to close cart
closee.addEventListener("click", () => {
    bo.classList.remove("active");
});


const checkoutbut=()=>{

    location.assign("./adreesspage.html")
}

      </script>
</body>
</html>